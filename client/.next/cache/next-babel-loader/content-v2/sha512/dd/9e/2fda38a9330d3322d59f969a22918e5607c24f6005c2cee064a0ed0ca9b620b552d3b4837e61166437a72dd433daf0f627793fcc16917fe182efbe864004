{"ast":null,"code":"var _s2 = $RefreshSig$();\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _toConsumableArray from \"/Users/Shital.r.bavikar/dev/reactjs/demo/next-apollo-demo/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\n\nvar _jsxFileName = \"/Users/Shital.r.bavikar/dev/reactjs/demo/next-apollo-demo/client/components/Users/Users.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useRef, useEffect } from \"react\";\nimport uniqid from 'uniqid';\nimport { useQuery } from \"@apollo/client\";\nimport { Spinner } from \"../Spinner/Spinner\";\nimport styles from './Users.module.css';\nimport { UserCard } from './UserCard';\nimport { GET_USERS_INFO } from '../../lib/queries/getUsersInfo';\nexport var Users = function Users() {\n  _s2();\n\n  _s();\n\n  var messageRef = useRef(null);\n\n  var _useQuery = useQuery(GET_USERS_INFO, {\n    variables: {\n      after: null\n    }\n  }),\n      loading = _useQuery.loading,\n      error = _useQuery.error,\n      data = _useQuery.data,\n      fetchMore = _useQuery.fetchMore;\n\n  useEffect(function () {\n    var _messageRef$current;\n\n    return (_messageRef$current = messageRef.current) === null || _messageRef$current === void 0 ? void 0 : _messageRef$current.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  });\n\n  var loadMoreUsersHandler = function loadMoreUsersHandler() {\n    var endCursor = data.users.pageInfo.endCursor;\n    fetchMore({\n      variables: {\n        after: endCursor\n      },\n      updateQuery: function updateQuery(prevResult, _ref) {\n        var fetchMoreResult = _ref.fetchMoreResult;\n        fetchMoreResult.users.edges = [].concat(_toConsumableArray(prevResult.users.edges), _toConsumableArray(fetchMoreResult.users.edges));\n        return fetchMoreResult;\n      }\n    });\n  };\n\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Error\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 20\n  }, _this);\n  if (loading) return /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 23\n  }, _this);\n\n  if (data && data.users.edges.length > 0) {\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: styles.usersListTitle,\n        \"data-test\": \"users-list-title\",\n        children: \"Users List\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 13\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.usersWrapper,\n        \"data-test\": \"users-list-wrapper\",\n        children: data.users.edges.map(function (user) {\n          return /*#__PURE__*/_jsxDEV(UserCard, {\n            userInfo: user.node\n          }, uniqid(), false, {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 24\n          }, _this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 13\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.userActions,\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: function onClick() {\n            return loadMoreUsersHandler();\n          },\n          children: \"Load more\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 15\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 13\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 9\n    }, _this);\n  }\n};\n\n_s2(Users, \"wtmOVEcDtw/p9H1eALLFyKbAeX4=\", false, function () {\n  return [useQuery];\n});\n\n_c2 = Users;\n\n_s(Users, \"3O7G/Olsew0mPmMxQ1/uqDRNBPU=\", false, function () {\n  return [useQuery];\n});\n\n_c = Users;\n\nvar _c;\n\n$RefreshReg$(_c, \"Users\");\n;\n\nvar _a, _b; // Legacy CSS implementations will `eval` browser code in a Node.js context\n// to extract CSS. For backwards compatibility, we need to check we're in a\n// browser context before continuing.\n\n\nif (typeof self !== 'undefined' && // AMP / No-JS mode does not inject these helpers:\n'$RefreshHelpers$' in self) {\n  var currentExports = module.__proto__.exports;\n  var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null; // This cannot happen in MainTemplate because the exports mismatch between\n  // templating and execution.\n\n  self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id); // A module can be accepted automatically based on its exports, e.g. when\n  // it is a Refresh Boundary.\n\n  if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n    // Save the previous exports on update so we can compare the boundary\n    // signatures.\n    module.hot.dispose(function (data) {\n      data.prevExports = currentExports;\n    }); // Unconditionally accept an update to this module, we'll check if it's\n    // still a Refresh Boundary later.\n\n    module.hot.accept(); // This field is set when the previous version of this module was a\n    // Refresh Boundary, letting us know we need to check for invalidation or\n    // enqueue an update.\n\n    if (prevExports !== null) {\n      // A boundary can become ineligible if its exports are incompatible\n      // with the previous exports.\n      //\n      // For example, if you add/remove/change exports, we'll want to\n      // re-execute the importing modules, and force those components to\n      // re-render. Similarly, if you convert a class component to a\n      // function, we want to invalidate the boundary.\n      if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n        module.hot.invalidate();\n      } else {\n        self.$RefreshHelpers$.scheduleUpdate();\n      }\n    }\n  } else {\n    // Since we just executed the code for the module, it's possible that the\n    // new exports made it ineligible for being a boundary.\n    // We only care about the case when we were _previously_ a boundary,\n    // because we already accepted this update (accidental side effect).\n    var isNoLongerABoundary = prevExports !== null;\n\n    if (isNoLongerABoundary) {\n      module.hot.invalidate();\n    }\n  }\n}\n\nvar _c2;\n\n$RefreshReg$(_c2, \"Users\");","map":{"version":3,"sources":["/Users/Shital.r.bavikar/dev/reactjs/demo/next-apollo-demo/client/components/Users/Users.tsx"],"names":["Users","messageRef","useRef","loading","error","data","fetchMore","useQuery","variables","after","useEffect","behavior","loadMoreUsersHandler","endCursor","updateQuery","fetchMoreResult","prevResult","styles","uniqid","user","node"],"mappings":"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","sourcesContent":["import React, {useRef, useEffect} from \"react\";\nimport uniqid from 'uniqid';\nimport { useQuery } from \"@apollo/client\";\nimport {Spinner} from \"../Spinner/Spinner\";\nimport styles from './Users.module.css';\nimport {UserCard} from './UserCard';\nimport {GET_USERS_INFO} from '../../lib/queries/getUsersInfo';\n\n\nexport const Users = () => {\n  const messageRef = useRef<HTMLDivElement>(null);\n  \n  const { loading, error, data, fetchMore } = useQuery(GET_USERS_INFO, {\n    variables: { after: null }\n  });\n  \n  useEffect(() => messageRef.current?.scrollIntoView({behavior: \"smooth\"}));\n  \n  const loadMoreUsersHandler = () => {\n    const {endCursor} = data.users.pageInfo;\n      \n    fetchMore({\n      variables: { after: endCursor },\n      updateQuery: (prevResult: any, { fetchMoreResult }: any) => {\n        fetchMoreResult.users.edges = [\n          ...prevResult.users.edges,\n          ...fetchMoreResult.users.edges\n        ];\n        return fetchMoreResult;\n      }});\n     \n}\n\n  if(error) return <div>Error</div>;\n\n  if (loading) return <Spinner/>;\n  \n  if (data && data.users.edges.length > 0) {\n      return (\n        <React.Fragment>\n          {/* <Suspense fallback={<Spinner />}> */}\n            <h3 className={styles.usersListTitle} data-test=\"users-list-title\">Users List</h3>\n            <div className={styles.usersWrapper} data-test=\"users-list-wrapper\">\n                {data.users.edges.map(user => { \n                return <UserCard key={uniqid()} userInfo = {user.node}/> })}\n            </div>\n          {/* </Suspense> */}\n            <div className={styles.userActions}>\n              <button onClick={() => loadMoreUsersHandler()}>Load more</button>\n            </div>\n        </React.Fragment>\n      );\n  }\n} "]},"metadata":{},"sourceType":"module"}